import{b as $,a4 as C,g as k,w as M,o as B,d as q,M as p,l as c,L as F,a9 as N}from"./index-57RAIp0g.js";import{b as _}from"./vm-joK3a_I0.js";import{e as W,g as j}from"./QBtn-ByGc03q8.js";function oe(e,t,n){let l;function r(){l!==void 0&&(C.remove(l),l=void 0)}return $(()=>{e.value===!0&&r()}),{removeFromHistory:r,addToHistory(){l={condition:()=>n.value===!0,handler:t},C.add(l)}}}const le={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ne=["beforeShow","show","beforeHide","hide"];function re({showing:e,canShow:t,hideOnRouteChange:n,handleShow:l,handleHide:r,processOnMount:w}){const i=k(),{props:s,emit:d,proxy:L}=i;let u;function O(o){e.value===!0?y(o):S(o)}function S(o){if(s.disable===!0||o!==void 0&&o.qAnchorHandled===!0||t!==void 0&&t(o)!==!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(d("update:modelValue",!0),u=o,q(()=>{u===o&&(u=void 0)})),(s.modelValue===null||f===!1)&&V(o)}function V(o){e.value!==!0&&(e.value=!0,d("beforeShow",o),l!==void 0?l(o):d("show",o))}function y(o){if(s.disable===!0)return;const f=s["onUpdate:modelValue"]!==void 0;f===!0&&(d("update:modelValue",!1),u=o,q(()=>{u===o&&(u=void 0)})),(s.modelValue===null||f===!1)&&H(o)}function H(o){e.value!==!1&&(e.value=!1,d("beforeHide",o),r!==void 0?r(o):d("hide",o))}function x(o){s.disable===!0&&o===!0?s["onUpdate:modelValue"]!==void 0&&d("update:modelValue",!1):o===!0!==e.value&&(o===!0?V:H)(u)}M(()=>s.modelValue,x),n!==void 0&&_(i)===!0&&M(()=>L.$route.fullPath,()=>{n.value===!0&&e.value===!0&&y()}),w===!0&&B(()=>{x(s.modelValue)});const P={show:S,hide:y,toggle:O};return Object.assign(L,P),P}const ie=[Element,String],D=[null,document,document.body,document.scrollingElement,document.documentElement];function se(e,t){let n=j(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return D.includes(n)?window:n}function I(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function K(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let v;function de(){if(v!==void 0)return v;const e=document.createElement("p"),t=document.createElement("div");W(e,{width:"100%",height:"200px"}),W(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let l=e.offsetWidth;return n===l&&(l=t.clientWidth),t.remove(),v=n-l,v}function R(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}let m=0,b,T,h,E=!1,X,Y,A,a=null;function G(e){J(e)&&F(e)}function J(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=N(e),n=e.shiftKey&&!e.deltaX,l=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),r=n||l?e.deltaY:e.deltaX;for(let w=0;w<t.length;w++){const i=t[w];if(R(i,l))return l?r<0&&i.scrollTop===0?!0:r>0&&i.scrollTop+i.clientHeight===i.scrollHeight:r<0&&i.scrollLeft===0?!0:r>0&&i.scrollLeft+i.clientWidth===i.scrollWidth}return!0}function U(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function g(e){E!==!0&&(E=!0,requestAnimationFrame(()=>{E=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:l}=document.scrollingElement;(h===void 0||t!==window.innerHeight)&&(h=n-t,document.scrollingElement.scrollTop=l),l>h&&(document.scrollingElement.scrollTop-=Math.ceil((l-h)/8))}))}function z(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:l,overflowX:r}=window.getComputedStyle(t);b=K(window),T=I(window),X=t.style.left,Y=t.style.top,A=window.location.href,t.style.left=`-${b}px`,t.style.top=`-${T}px`,r!=="hidden"&&(r==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),l!=="hidden"&&(l==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",g,c.passiveCapture),window.visualViewport.addEventListener("scroll",g,c.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",U,c.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${e}EventListener`]("wheel",G,c.notPassive),e==="remove"&&(p.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",g,c.passiveCapture),window.visualViewport.removeEventListener("scroll",g,c.passiveCapture)):window.removeEventListener("scroll",U,c.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=X,t.style.top=Y,window.location.href===A&&window.scrollTo(b,T),h=void 0)}function Q(e){let t="add";if(e===!0){if(m++,a!==null){clearTimeout(a),a=null;return}if(m>1)return}else{if(m===0||(m--,m>0))return;if(t="remove",p.is.ios===!0&&p.is.nativeMobile===!0){a!==null&&clearTimeout(a),a=setTimeout(()=>{z(t),a=null},100);return}}z(t)}function ue(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,Q(t))}}}export{le as a,re as b,oe as c,ue as d,I as e,K as f,se as g,de as h,ie as s,ne as u};
